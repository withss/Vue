<!DOCTYPE html>
<html lang>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ajax-get</title>
  </head>
  <body>
    <!-- Ajax是与服务器交换数据并更新部分网页的艺术，在不重新加载整个页面的情况下。 -->
    <button>点击</button>
    <script>
      window.onload = function (ev) {
        const oBtn = document.querySelector("button");
        oBtn.onclick = function (ev1) {
          //1.创建一个异步对象
          var xmlHttp = new XMLHttpRequest();
          //2.设置请求方式和请求地址
          /* method方式:GET/POST
            url:文件在服务器上的位置
            async:true/false
           */
          xmlHttp.open("GET", "05-ajax-get.php", true);
          //3.发送请求
          xmlHttp.send();
          //4.监听状态变化
          xmlHttp.onreadystatechange = function (ev2) {
            //5.处理返回结果
            /*
            状态变化的过程：
            0: 请求未初始化
            1: 服务器连接已建立
            2: 请求已接收
            3: 请求处理中
            4: 请求已完成，且响应已就绪
             */
            if (xmlHttp.readyState == 4) {
              //根据HTTP状态码来判断是否接到服务器数据
              if ((xmlHttp.status >= 200 && xmlHttp.status < 300) || xmlHttp.status === 304) {
                // console.log("收到服务器返回的数据");
                console.log(xmlHttp.responseText); //服务器返回的字符串
              } else {
                console.log("没有收到服务器返回的结果");
              }
            }
          };
        };
      };
    </script>
  </body>
</html>
